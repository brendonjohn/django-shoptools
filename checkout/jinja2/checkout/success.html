{% extends "checkout/base.html" %}
{% from 'checkout/snippets/order.html' import order_lines with context %}

{% block title %}Order Completed{% endblock %}

{% block content %}
  <article class="checkout-success">
    <section class="checkout-order-status">
      <p class="order">
        Order {{ order.invoice_number }}
        {{ order.created|date('d F y') }}
      </p>
      <p class="status">Status: <span>{{ order.get_status_display() }}</span>
      </p>
    </section>

    {{ order_lines(order, show_quantity=True) }}

    <div class='shipping'>
      <strong>Shipping</strong>
      <p class='shipping-cost'>
        ${{ order.shipping_cost|floatformat(2) }}
      </p>
    </div>

    {% if order.total_discount -%}
      <div class='discount'>
        <strong>Discount</strong>
        <p class='total-discount'>
          -${{ order.total_discount|floatformat(2) }}
        </p>
      </div>
    {% endif -%}

    <p class="checkout-totals">
      <strong>Total</strong>
      <span class="price">
        $<span class="cart-total">{{ order.total|floatformat(2) }}</span>
      </span>
    </p>

    <div class="checkout-order-detail">
      <h5>Order details</h5>
      <p>
        {{ order.name }}<br>
        {{ order.address }}<br>
        {{ order.city }} {{ order.postcode }}<br>
        {{ order.state }}<br>
        {{ order.get_country_display() }}<br>
        {{ order.created|date('d F Y') }}<br>
        Email: {{ order.email }}<br>
        Phone: {{ order.phone }}<br>
      </p>
    </div>
  </article>
{% endblock %}
